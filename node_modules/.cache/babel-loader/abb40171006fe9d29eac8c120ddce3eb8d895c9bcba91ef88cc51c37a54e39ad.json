{"ast":null,"code":"var _jsxFileName = \"/Users/cadany/WebstormProjects/monaco/src/MultiEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from \"react\";\nimport { CodeEditor } from \"./CodeEditor\";\nimport { editor } from \"monaco-editor\";\nvar ITextModel = editor.ITextModel;\nvar ICodeEditorViewState = editor.ICodeEditorViewState;\nimport { Button, Empty, Tabs } from \"antd\";\nimport * as monaco from \"monaco-editor\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WorkerEmpty = () => /*#__PURE__*/_jsxDEV(Empty, {\n  imageStyle: {\n    height: 60\n  },\n  description: /*#__PURE__*/_jsxDEV(\"span\", {\n    children: [\"\\u65B0\\u5EFASQL\\u67E5\\u8BE2\\u7F16\\u8F91\\u5668 \", /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"#API\",\n      children: \"Description\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 13\n  }, this),\n  children: /*#__PURE__*/_jsxDEV(Button, {\n    type: \"primary\",\n    children: \"Create Now\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 9\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 21,\n  columnNumber: 5\n}, this);\n_c = WorkerEmpty;\nexport const MultiEditor = () => {\n  _s();\n  let currentModel = {\n    viewstate: null\n  };\n  const [activeKey, setActiveKey] = useState(\"0\");\n  const [items, setItems] = useState([]);\n  const newTabIndex = useRef(1);\n  const renderTabBar = (props, DefaultTabBar) => /*#__PURE__*/_jsxDEV(DefaultTabBar, {\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n  const onChange = activeKey => {\n    setActiveKey(activeKey);\n  };\n  const add = () => {\n    console.log(\"add\");\n    const newActivekey = `sql-${newTabIndex.current++}`;\n    const newModel = {\n      standaloneEditorConstructionOptions: {\n        model: monaco.editor.createModel(\"select * from table\", \"mysql\")\n      },\n      viewstate: null\n    };\n    setItems([...items, {\n      key: newActivekey,\n      label: newActivekey,\n      modelState: newModel\n    }]);\n  };\n  const remove = e => {\n    console.log(\"remove\" + e);\n  };\n  const onEdit = (e, action) => {\n    if (action === 'add') add();else remove(e);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"100vh\",\n      width: \"100vw\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Tabs, {\n      id: \"mutil_code_editor\",\n      type: \"editable-card\",\n      tabBarStyle: {\n        height: 25\n      },\n      items: items,\n      onChange: onChange,\n      onEdit: onEdit,\n      renderTabBar: renderTabBar\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), items.length > 0 ? /*#__PURE__*/_jsxDEV(CodeEditor, {\n      viewstate: currentModel.viewstate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 36\n    }, this) : /*#__PURE__*/_jsxDEV(WorkerEmpty, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 87\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n_s(MultiEditor, \"uBK1XzKhYj+rqDZJ9O9BhShZDAM=\");\n_c2 = MultiEditor;\nvar _c, _c2;\n$RefreshReg$(_c, \"WorkerEmpty\");\n$RefreshReg$(_c2, \"MultiEditor\");","map":{"version":3,"names":["React","useRef","useState","CodeEditor","editor","ITextModel","ICodeEditorViewState","Button","Empty","Tabs","monaco","jsxDEV","_jsxDEV","WorkerEmpty","imageStyle","height","description","children","href","fileName","_jsxFileName","lineNumber","columnNumber","type","_c","MultiEditor","_s","currentModel","viewstate","activeKey","setActiveKey","items","setItems","newTabIndex","renderTabBar","props","DefaultTabBar","onChange","add","console","log","newActivekey","current","newModel","standaloneEditorConstructionOptions","model","createModel","key","label","modelState","remove","e","onEdit","action","style","width","id","tabBarStyle","length","_c2","$RefreshReg$"],"sources":["/Users/cadany/WebstormProjects/monaco/src/MultiEditor.tsx"],"sourcesContent":["import React, {useRef, useState} from \"react\";\nimport {Content} from \"antd/es/layout/layout\";\nimport {CodeEditor, IModelState} from \"./CodeEditor\";\nimport {editor} from \"monaco-editor\";\nimport ITextModel = editor.ITextModel;\nimport ICodeEditorViewState = editor.ICodeEditorViewState;\nimport {Button, Empty, Tabs, TabsProps} from \"antd\";\nimport * as monaco from \"monaco-editor\";\n\ntype TargetKey = React.MouseEvent | React.KeyboardEvent | string;\n\n\ninterface IPane {\n    key: string\n    label: string\n    children?: React.ReactNode\n    modelState?: IModelState\n}\n\nconst WorkerEmpty = () =>\n    <Empty\n        imageStyle={{height: 60}}\n        description={\n            <span>\n            新建SQL查询编辑器 <a href=\"#API\">Description</a>\n         </span>\n        }>\n        <Button type=\"primary\">Create Now</Button>\n    </Empty>\n\n\nexport const MultiEditor: React.FC = () => {\n\n    let currentModel: IModelState = {viewstate: null};\n    const [activeKey, setActiveKey] = useState(\"0\");\n    const [items, setItems] = useState<IPane[]>([]);\n    const newTabIndex = useRef(1);\n\n    const renderTabBar: TabsProps['renderTabBar'] = (props, DefaultTabBar) => (\n        <DefaultTabBar {...props} />\n    );\n\n    const onChange = (activeKey: string) => {\n        setActiveKey(activeKey);\n    }\n\n    const add = () => {\n        console.log(\"add\");\n        const newActivekey = `sql-${newTabIndex.current++}`;\n        const newModel: IModelState = {\n            standaloneEditorConstructionOptions: {model: monaco.editor.createModel(\"select * from table\", \"mysql\")},\n            viewstate: null\n        };\n        setItems([...items, {key: newActivekey, label: newActivekey, modelState: newModel}]);\n    }\n\n    const remove = (e: TargetKey) => {\n        console.log(\"remove\" + e)\n    }\n\n    const onEdit = (e: React.MouseEvent | React.KeyboardEvent | string, action: string) => {\n        if (action === 'add') add();\n        else remove(e);\n    }\n\n    return (\n        <div style={{height: \"100vh\", width: \"100vw\"}}>\n            <Tabs\n                id={\"mutil_code_editor\"}\n                type=\"editable-card\"\n                tabBarStyle={{height: 25}}\n                items={items}\n                onChange={onChange}\n                onEdit={onEdit}\n                renderTabBar={renderTabBar}\n            />\n            {\n                items.length > 0 ? <CodeEditor viewstate={currentModel.viewstate}/> : <WorkerEmpty></WorkerEmpty>\n            }\n\n        </div>\n    );\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}