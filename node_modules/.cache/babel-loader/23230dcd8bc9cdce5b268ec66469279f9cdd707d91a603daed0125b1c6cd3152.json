{"ast":null,"code":"import _slicedToArray from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _get from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _createClass from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineModel, OutlineElement, OutlineGroup } from '../../documentSymbols/browser/outlineModel.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { FoldingController } from '../../folding/browser/folding.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nexport var StickyRange = /*#__PURE__*/_createClass(function StickyRange(startLineNumber, endLineNumber) {\n  _classCallCheck(this, StickyRange);\n  this.startLineNumber = startLineNumber;\n  this.endLineNumber = endLineNumber;\n});\nexport var StickyLineCandidate = /*#__PURE__*/_createClass(function StickyLineCandidate(startLineNumber, endLineNumber, nestingDepth) {\n  _classCallCheck(this, StickyLineCandidate);\n  this.startLineNumber = startLineNumber;\n  this.endLineNumber = endLineNumber;\n  this.nestingDepth = nestingDepth;\n});\nvar StickyLineCandidateProvider = /*#__PURE__*/function (_Disposable) {\n  _inherits(StickyLineCandidateProvider, _Disposable);\n  var _super = _createSuper(StickyLineCandidateProvider);\n  function StickyLineCandidateProvider(editor, languageFeaturesService) {\n    var _this;\n    _classCallCheck(this, StickyLineCandidateProvider);\n    _this = _super.call(this);\n    _this._onDidChangeStickyScroll = _this._store.add(new Emitter());\n    _this.onDidChangeStickyScroll = _this._onDidChangeStickyScroll.event;\n    _this._sessionStore = new DisposableStore();\n    _this._editor = editor;\n    _this._languageFeaturesService = languageFeaturesService;\n    _this._updateSoon = _this._register(new RunOnceScheduler(function () {\n      return _this.update();\n    }, 50));\n    _this._register(_this._editor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(109 /* EditorOption.stickyScroll */)) {\n        _this.readConfiguration();\n      }\n    }));\n    _this.readConfiguration();\n    return _this;\n  }\n  _createClass(StickyLineCandidateProvider, [{\n    key: \"dispose\",\n    value: function dispose() {\n      _get(_getPrototypeOf(StickyLineCandidateProvider.prototype), \"dispose\", this).call(this);\n      this._sessionStore.dispose();\n    }\n  }, {\n    key: \"readConfiguration\",\n    value: function readConfiguration() {\n      var _this2 = this;\n      var options = this._editor.getOption(109 /* EditorOption.stickyScroll */);\n      if (options.enabled === false) {\n        this._sessionStore.clear();\n        return;\n      } else {\n        this._sessionStore.add(this._editor.onDidChangeModel(function () {\n          _this2.update();\n        }));\n        this._sessionStore.add(this._editor.onDidChangeHiddenAreas(function () {\n          return _this2.update();\n        }));\n        this._sessionStore.add(this._editor.onDidChangeModelContent(function () {\n          return _this2._updateSoon.schedule();\n        }));\n        this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(function () {\n          _this2.update();\n        }));\n        this.update();\n      }\n    }\n  }, {\n    key: \"getVersionId\",\n    value: function getVersionId() {\n      var _a;\n      return (_a = this._model) === null || _a === void 0 ? void 0 : _a.version;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _a;\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n              this._cts = new CancellationTokenSource();\n              _context.next = 4;\n              return this.updateOutlineModel(this._cts.token);\n            case 4:\n              this._onDidChangeStickyScroll.fire();\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"updateOutlineModel\",\n    value: function updateOutlineModel(token) {\n      var _a;\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _this3 = this;\n        var model, modelVersionId, isDifferentModel, resetHandle, outlineModel, _StickyOutlineElement, stickyOutlineElement, providerID, foldingController, foldingModel, foldingElement;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (this._editor.hasModel()) {\n                _context2.next = 2;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 2:\n              model = this._editor.getModel();\n              modelVersionId = model.getVersionId();\n              isDifferentModel = this._model ? !isEqual(this._model.uri, model.uri) : false; // clear sticky scroll to not show stale data for too long\n              resetHandle = isDifferentModel ? setTimeout(function () {\n                if (!token.isCancellationRequested) {\n                  _this3._model = new StickyOutlineModel(model.uri, model.getVersionId(), undefined, undefined);\n                  _this3._onDidChangeStickyScroll.fire();\n                }\n              }, 75) : undefined; // get elements from outline or folding model\n              _context2.next = 8;\n              return OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, model, token);\n            case 8:\n              outlineModel = _context2.sent;\n              if (!token.isCancellationRequested) {\n                _context2.next = 11;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 11:\n              if (!(outlineModel.children.size !== 0)) {\n                _context2.next = 16;\n                break;\n              }\n              _StickyOutlineElement = StickyOutlineElement.fromOutlineModel(outlineModel, (_a = this._model) === null || _a === void 0 ? void 0 : _a.outlineProviderId), stickyOutlineElement = _StickyOutlineElement.stickyOutlineElement, providerID = _StickyOutlineElement.providerID;\n              this._model = new StickyOutlineModel(model.uri, modelVersionId, stickyOutlineElement, providerID);\n              _context2.next = 23;\n              break;\n            case 16:\n              foldingController = FoldingController.get(this._editor);\n              _context2.next = 19;\n              return foldingController === null || foldingController === void 0 ? void 0 : foldingController.getFoldingModel();\n            case 19:\n              foldingModel = _context2.sent;\n              if (!token.isCancellationRequested) {\n                _context2.next = 22;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 22:\n              if (foldingModel && foldingModel.regions.length !== 0) {\n                foldingElement = StickyOutlineElement.fromFoldingModel(foldingModel);\n                this._model = new StickyOutlineModel(model.uri, modelVersionId, foldingElement, undefined);\n              } else {\n                this._model = undefined;\n              }\n            case 23:\n              clearTimeout(resetHandle);\n            case 24:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"updateIndex\",\n    value: function updateIndex(index) {\n      if (index === -1) {\n        index = 0;\n      } else if (index < 0) {\n        index = -index - 2;\n      }\n      return index;\n    }\n  }, {\n    key: \"getCandidateStickyLinesIntersectingFromOutline\",\n    value: function getCandidateStickyLinesIntersectingFromOutline(range, outlineModel, result, depth, lastStartLineNumber) {\n      if (outlineModel.children.length === 0) {\n        return;\n      }\n      var lastLine = lastStartLineNumber;\n      var childrenStartLines = [];\n      for (var i = 0; i < outlineModel.children.length; i++) {\n        var child = outlineModel.children[i];\n        if (child.range) {\n          childrenStartLines.push(child.range.startLineNumber);\n        }\n      }\n      var lowerBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber, function (a, b) {\n        return a - b;\n      }));\n      var upperBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber + depth, function (a, b) {\n        return a - b;\n      }));\n      for (var _i = lowerBound; _i <= upperBound; _i++) {\n        var _child = outlineModel.children[_i];\n        if (!_child) {\n          return;\n        }\n        if (_child.range) {\n          var childStartLine = _child.range.startLineNumber;\n          var childEndLine = _child.range.endLineNumber;\n          if (range.startLineNumber <= childEndLine + 1 && childStartLine - 1 <= range.endLineNumber && childStartLine !== lastLine) {\n            lastLine = childStartLine;\n            result.push(new StickyLineCandidate(childStartLine, childEndLine - 1, depth + 1));\n            this.getCandidateStickyLinesIntersectingFromOutline(range, _child, result, depth + 1, childStartLine);\n          }\n        } else {\n          this.getCandidateStickyLinesIntersectingFromOutline(range, _child, result, depth, lastStartLineNumber);\n        }\n      }\n    }\n  }, {\n    key: \"getCandidateStickyLinesIntersecting\",\n    value: function getCandidateStickyLinesIntersecting(range) {\n      var _a, _b;\n      if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.element)) {\n        return [];\n      }\n      var stickyLineCandidates = [];\n      this.getCandidateStickyLinesIntersectingFromOutline(range, this._model.element, stickyLineCandidates, 0, -1);\n      var hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n      if (hiddenRanges) {\n        var _iterator = _createForOfIteratorHelper(hiddenRanges),\n          _step;\n        try {\n          var _loop = function _loop() {\n            var hiddenRange = _step.value;\n            stickyLineCandidates = stickyLineCandidates.filter(function (stickyLine) {\n              return !(stickyLine.startLineNumber >= hiddenRange.startLineNumber && stickyLine.endLineNumber <= hiddenRange.endLineNumber + 1);\n            });\n          };\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            _loop();\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      return stickyLineCandidates;\n    }\n  }]);\n  return StickyLineCandidateProvider;\n}(Disposable);\nStickyLineCandidateProvider = __decorate([__param(1, ILanguageFeaturesService)], StickyLineCandidateProvider);\nexport { StickyLineCandidateProvider };\nvar StickyOutlineElement = /*#__PURE__*/function () {\n  function StickyOutlineElement(\n  /**\n   * Range of line numbers spanned by the current scope\n   */\n  range,\n  /**\n   * Must be sorted by start line number\n  */\n  children,\n  /**\n   * Parent sticky outline element\n   */\n  parent) {\n    _classCallCheck(this, StickyOutlineElement);\n    this.range = range;\n    this.children = children;\n    this.parent = parent;\n  }\n  _createClass(StickyOutlineElement, null, [{\n    key: \"comparator\",\n    value: function comparator(range1, range2) {\n      if (range1.startLineNumber !== range2.startLineNumber) {\n        return range1.startLineNumber - range2.startLineNumber;\n      } else {\n        return range2.endLineNumber - range1.endLineNumber;\n      }\n    }\n  }, {\n    key: \"fromOutlineElement\",\n    value: function fromOutlineElement(outlineElement, previousStartLine) {\n      var _this4 = this;\n      var children = [];\n      var _iterator2 = _createForOfIteratorHelper(outlineElement.children.values()),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var child = _step2.value;\n          if (child.symbol.selectionRange.startLineNumber !== child.symbol.range.endLineNumber) {\n            if (child.symbol.selectionRange.startLineNumber !== previousStartLine) {\n              children.push(StickyOutlineElement.fromOutlineElement(child, child.symbol.selectionRange.startLineNumber));\n            } else {\n              var _iterator3 = _createForOfIteratorHelper(child.children.values()),\n                _step3;\n              try {\n                for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                  var subchild = _step3.value;\n                  children.push(StickyOutlineElement.fromOutlineElement(subchild, child.symbol.selectionRange.startLineNumber));\n                }\n              } catch (err) {\n                _iterator3.e(err);\n              } finally {\n                _iterator3.f();\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      children.sort(function (child1, child2) {\n        return _this4.comparator(child1.range, child2.range);\n      });\n      var range = new StickyRange(outlineElement.symbol.selectionRange.startLineNumber, outlineElement.symbol.range.endLineNumber);\n      return new StickyOutlineElement(range, children, undefined);\n    }\n  }, {\n    key: \"fromOutlineModel\",\n    value: function fromOutlineModel(outlineModel, preferredProvider) {\n      var _this5 = this;\n      var outlineElements;\n      // When several possible outline providers\n      if (Iterable.first(outlineModel.children.values()) instanceof OutlineGroup) {\n        var provider = Iterable.find(outlineModel.children.values(), function (outlineGroupOfModel) {\n          return outlineGroupOfModel.id === preferredProvider;\n        });\n        if (provider) {\n          outlineElements = provider.children;\n        } else {\n          var tempID = '';\n          var maxTotalSumOfRanges = -1;\n          var optimalOutlineGroup = undefined;\n          var _iterator4 = _createForOfIteratorHelper(outlineModel.children.entries()),\n            _step4;\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var _step4$value = _slicedToArray(_step4.value, 2),\n                _key = _step4$value[0],\n                outlineGroup = _step4$value[1];\n              var totalSumRanges = StickyOutlineElement.findSumOfRangesOfGroup(outlineGroup);\n              if (totalSumRanges > maxTotalSumOfRanges) {\n                optimalOutlineGroup = outlineGroup;\n                maxTotalSumOfRanges = totalSumRanges;\n                tempID = outlineGroup.id;\n              }\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n          preferredProvider = tempID;\n          outlineElements = optimalOutlineGroup.children;\n        }\n      } else {\n        outlineElements = outlineModel.children;\n      }\n      var stickyChildren = [];\n      var outlineElementsArray = Array.from(outlineElements.values()).sort(function (element1, element2) {\n        var range1 = new StickyRange(element1.symbol.range.startLineNumber, element1.symbol.range.endLineNumber);\n        var range2 = new StickyRange(element2.symbol.range.startLineNumber, element2.symbol.range.endLineNumber);\n        return _this5.comparator(range1, range2);\n      });\n      var _iterator5 = _createForOfIteratorHelper(outlineElementsArray),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var outlineElement = _step5.value;\n          stickyChildren.push(StickyOutlineElement.fromOutlineElement(outlineElement, outlineElement.symbol.selectionRange.startLineNumber));\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      var stickyOutlineElement = new StickyOutlineElement(undefined, stickyChildren, undefined);\n      return {\n        stickyOutlineElement: stickyOutlineElement,\n        providerID: preferredProvider\n      };\n    }\n  }, {\n    key: \"findSumOfRangesOfGroup\",\n    value: function findSumOfRangesOfGroup(outline) {\n      var res = 0;\n      var _iterator6 = _createForOfIteratorHelper(outline.children.values()),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var child = _step6.value;\n          res += this.findSumOfRangesOfGroup(child);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n      if (outline instanceof OutlineElement) {\n        return res + outline.symbol.range.endLineNumber - outline.symbol.selectionRange.startLineNumber;\n      } else {\n        return res;\n      }\n    }\n  }, {\n    key: \"fromFoldingModel\",\n    value: function fromFoldingModel(foldingModel) {\n      var regions = foldingModel.regions;\n      var length = regions.length;\n      var range;\n      var stackOfParents = [];\n      var stickyOutlineElement = new StickyOutlineElement(undefined, [], undefined);\n      var parentStickyOutlineElement = stickyOutlineElement;\n      for (var i = 0; i < length; i++) {\n        range = new StickyRange(regions.getStartLineNumber(i), regions.getEndLineNumber(i) + 1);\n        while (stackOfParents.length !== 0 && (range.startLineNumber < stackOfParents[stackOfParents.length - 1].startLineNumber || range.endLineNumber > stackOfParents[stackOfParents.length - 1].endLineNumber)) {\n          stackOfParents.pop();\n          if (parentStickyOutlineElement.parent !== undefined) {\n            parentStickyOutlineElement = parentStickyOutlineElement.parent;\n          }\n        }\n        var child = new StickyOutlineElement(range, [], parentStickyOutlineElement);\n        parentStickyOutlineElement.children.push(child);\n        parentStickyOutlineElement = child;\n        stackOfParents.push(range);\n      }\n      return stickyOutlineElement;\n    }\n  }]);\n  return StickyOutlineElement;\n}();\nvar StickyOutlineModel = /*#__PURE__*/_createClass(function StickyOutlineModel(uri, version, element, outlineProviderId) {\n  _classCallCheck(this, StickyOutlineModel);\n  this.uri = uri;\n  this.version = version;\n  this.element = element;\n  this.outlineProviderId = outlineProviderId;\n});","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Disposable","DisposableStore","ILanguageFeaturesService","OutlineModel","OutlineElement","OutlineGroup","CancellationTokenSource","RunOnceScheduler","Emitter","binarySearch","Iterable","FoldingController","isEqual","StickyRange","_createClass","startLineNumber","endLineNumber","_classCallCheck","StickyLineCandidate","nestingDepth","StickyLineCandidateProvider","_Disposable","_inherits","_super","_createSuper","editor","languageFeaturesService","_this","call","_onDidChangeStickyScroll","_store","add","onDidChangeStickyScroll","event","_sessionStore","_editor","_languageFeaturesService","_updateSoon","_register","update","onDidChangeConfiguration","hasChanged","readConfiguration","dispose","_get","_getPrototypeOf","prototype","_this2","options","getOption","enabled","clear","onDidChangeModel","onDidChangeHiddenAreas","onDidChangeModelContent","schedule","documentSymbolProvider","onDidChange","getVersionId","_a","_model","version","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","_cts","updateOutlineModel","token","fire","stop","_callee2","_this3","model","modelVersionId","isDifferentModel","resetHandle","outlineModel","_StickyOutlineElement","stickyOutlineElement","providerID","foldingController","foldingModel","foldingElement","_callee2$","_context2","hasModel","abrupt","getModel","uri","setTimeout","isCancellationRequested","StickyOutlineModel","undefined","create","sent","children","size","StickyOutlineElement","fromOutlineModel","outlineProviderId","get","getFoldingModel","regions","fromFoldingModel","clearTimeout","updateIndex","index","getCandidateStickyLinesIntersectingFromOutline","range","depth","lastStartLineNumber","lastLine","childrenStartLines","child","push","lowerBound","a","b","upperBound","childStartLine","childEndLine","getCandidateStickyLinesIntersecting","_b","element","stickyLineCandidates","hiddenRanges","_getViewModel","getHiddenAreas","_iterator","_createForOfIteratorHelper","_step","_loop","hiddenRange","filter","stickyLine","s","n","err","f","parent","comparator","range1","range2","fromOutlineElement","outlineElement","previousStartLine","_this4","_iterator2","values","_step2","symbol","selectionRange","_iterator3","_step3","subchild","sort","child1","child2","preferredProvider","_this5","outlineElements","first","provider","find","outlineGroupOfModel","id","tempID","maxTotalSumOfRanges","optimalOutlineGroup","_iterator4","entries","_step4","_step4$value","_slicedToArray","_key","outlineGroup","totalSumRanges","findSumOfRangesOfGroup","stickyChildren","outlineElementsArray","Array","from","element1","element2","_iterator5","_step5","outline","res","_iterator6","_step6","stackOfParents","parentStickyOutlineElement","getStartLineNumber","getEndLineNumber","pop"],"sources":["/Users/cadany/WebstormProjects/monaco/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollProvider.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineModel, OutlineElement, OutlineGroup } from '../../documentSymbols/browser/outlineModel.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { FoldingController } from '../../folding/browser/folding.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nexport class StickyRange {\n    constructor(startLineNumber, endLineNumber) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n    }\n}\nexport class StickyLineCandidate {\n    constructor(startLineNumber, endLineNumber, nestingDepth) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n        this.nestingDepth = nestingDepth;\n    }\n}\nlet StickyLineCandidateProvider = class StickyLineCandidateProvider extends Disposable {\n    constructor(editor, languageFeaturesService) {\n        super();\n        this._onDidChangeStickyScroll = this._store.add(new Emitter());\n        this.onDidChangeStickyScroll = this._onDidChangeStickyScroll.event;\n        this._sessionStore = new DisposableStore();\n        this._editor = editor;\n        this._languageFeaturesService = languageFeaturesService;\n        this._updateSoon = this._register(new RunOnceScheduler(() => this.update(), 50));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(109 /* EditorOption.stickyScroll */)) {\n                this.readConfiguration();\n            }\n        }));\n        this.readConfiguration();\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n    readConfiguration() {\n        const options = this._editor.getOption(109 /* EditorOption.stickyScroll */);\n        if (options.enabled === false) {\n            this._sessionStore.clear();\n            return;\n        }\n        else {\n            this._sessionStore.add(this._editor.onDidChangeModel(() => {\n                this.update();\n            }));\n            this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this.update()));\n            this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n            this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n                this.update();\n            }));\n            this.update();\n        }\n    }\n    getVersionId() {\n        var _a;\n        return (_a = this._model) === null || _a === void 0 ? void 0 : _a.version;\n    }\n    update() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n            this._cts = new CancellationTokenSource();\n            yield this.updateOutlineModel(this._cts.token);\n            this._onDidChangeStickyScroll.fire();\n        });\n    }\n    updateOutlineModel(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const modelVersionId = model.getVersionId();\n            const isDifferentModel = this._model ? !isEqual(this._model.uri, model.uri) : false;\n            // clear sticky scroll to not show stale data for too long\n            const resetHandle = isDifferentModel ? setTimeout(() => {\n                if (!token.isCancellationRequested) {\n                    this._model = new StickyOutlineModel(model.uri, model.getVersionId(), undefined, undefined);\n                    this._onDidChangeStickyScroll.fire();\n                }\n            }, 75) : undefined;\n            // get elements from outline or folding model\n            const outlineModel = yield OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, model, token);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            if (outlineModel.children.size !== 0) {\n                const { stickyOutlineElement, providerID } = StickyOutlineElement.fromOutlineModel(outlineModel, (_a = this._model) === null || _a === void 0 ? void 0 : _a.outlineProviderId);\n                this._model = new StickyOutlineModel(model.uri, modelVersionId, stickyOutlineElement, providerID);\n            }\n            else {\n                const foldingController = FoldingController.get(this._editor);\n                const foldingModel = yield (foldingController === null || foldingController === void 0 ? void 0 : foldingController.getFoldingModel());\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (foldingModel && foldingModel.regions.length !== 0) {\n                    const foldingElement = StickyOutlineElement.fromFoldingModel(foldingModel);\n                    this._model = new StickyOutlineModel(model.uri, modelVersionId, foldingElement, undefined);\n                }\n                else {\n                    this._model = undefined;\n                }\n            }\n            clearTimeout(resetHandle);\n        });\n    }\n    updateIndex(index) {\n        if (index === -1) {\n            index = 0;\n        }\n        else if (index < 0) {\n            index = -index - 2;\n        }\n        return index;\n    }\n    getCandidateStickyLinesIntersectingFromOutline(range, outlineModel, result, depth, lastStartLineNumber) {\n        if (outlineModel.children.length === 0) {\n            return;\n        }\n        let lastLine = lastStartLineNumber;\n        const childrenStartLines = [];\n        for (let i = 0; i < outlineModel.children.length; i++) {\n            const child = outlineModel.children[i];\n            if (child.range) {\n                childrenStartLines.push(child.range.startLineNumber);\n            }\n        }\n        const lowerBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber, (a, b) => { return a - b; }));\n        const upperBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber + depth, (a, b) => { return a - b; }));\n        for (let i = lowerBound; i <= upperBound; i++) {\n            const child = outlineModel.children[i];\n            if (!child) {\n                return;\n            }\n            if (child.range) {\n                const childStartLine = child.range.startLineNumber;\n                const childEndLine = child.range.endLineNumber;\n                if (range.startLineNumber <= childEndLine + 1 && childStartLine - 1 <= range.endLineNumber && childStartLine !== lastLine) {\n                    lastLine = childStartLine;\n                    result.push(new StickyLineCandidate(childStartLine, childEndLine - 1, depth + 1));\n                    this.getCandidateStickyLinesIntersectingFromOutline(range, child, result, depth + 1, childStartLine);\n                }\n            }\n            else {\n                this.getCandidateStickyLinesIntersectingFromOutline(range, child, result, depth, lastStartLineNumber);\n            }\n        }\n    }\n    getCandidateStickyLinesIntersecting(range) {\n        var _a, _b;\n        if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.element)) {\n            return [];\n        }\n        let stickyLineCandidates = [];\n        this.getCandidateStickyLinesIntersectingFromOutline(range, this._model.element, stickyLineCandidates, 0, -1);\n        const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n        if (hiddenRanges) {\n            for (const hiddenRange of hiddenRanges) {\n                stickyLineCandidates = stickyLineCandidates.filter(stickyLine => !(stickyLine.startLineNumber >= hiddenRange.startLineNumber && stickyLine.endLineNumber <= hiddenRange.endLineNumber + 1));\n            }\n        }\n        return stickyLineCandidates;\n    }\n};\nStickyLineCandidateProvider = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyLineCandidateProvider);\nexport { StickyLineCandidateProvider };\nclass StickyOutlineElement {\n    static comparator(range1, range2) {\n        if (range1.startLineNumber !== range2.startLineNumber) {\n            return range1.startLineNumber - range2.startLineNumber;\n        }\n        else {\n            return range2.endLineNumber - range1.endLineNumber;\n        }\n    }\n    static fromOutlineElement(outlineElement, previousStartLine) {\n        const children = [];\n        for (const child of outlineElement.children.values()) {\n            if (child.symbol.selectionRange.startLineNumber !== child.symbol.range.endLineNumber) {\n                if (child.symbol.selectionRange.startLineNumber !== previousStartLine) {\n                    children.push(StickyOutlineElement.fromOutlineElement(child, child.symbol.selectionRange.startLineNumber));\n                }\n                else {\n                    for (const subchild of child.children.values()) {\n                        children.push(StickyOutlineElement.fromOutlineElement(subchild, child.symbol.selectionRange.startLineNumber));\n                    }\n                }\n            }\n        }\n        children.sort((child1, child2) => this.comparator(child1.range, child2.range));\n        const range = new StickyRange(outlineElement.symbol.selectionRange.startLineNumber, outlineElement.symbol.range.endLineNumber);\n        return new StickyOutlineElement(range, children, undefined);\n    }\n    static fromOutlineModel(outlineModel, preferredProvider) {\n        let outlineElements;\n        // When several possible outline providers\n        if (Iterable.first(outlineModel.children.values()) instanceof OutlineGroup) {\n            const provider = Iterable.find(outlineModel.children.values(), outlineGroupOfModel => outlineGroupOfModel.id === preferredProvider);\n            if (provider) {\n                outlineElements = provider.children;\n            }\n            else {\n                let tempID = '';\n                let maxTotalSumOfRanges = -1;\n                let optimalOutlineGroup = undefined;\n                for (const [_key, outlineGroup] of outlineModel.children.entries()) {\n                    const totalSumRanges = StickyOutlineElement.findSumOfRangesOfGroup(outlineGroup);\n                    if (totalSumRanges > maxTotalSumOfRanges) {\n                        optimalOutlineGroup = outlineGroup;\n                        maxTotalSumOfRanges = totalSumRanges;\n                        tempID = outlineGroup.id;\n                    }\n                }\n                preferredProvider = tempID;\n                outlineElements = optimalOutlineGroup.children;\n            }\n        }\n        else {\n            outlineElements = outlineModel.children;\n        }\n        const stickyChildren = [];\n        const outlineElementsArray = Array.from(outlineElements.values()).sort((element1, element2) => {\n            const range1 = new StickyRange(element1.symbol.range.startLineNumber, element1.symbol.range.endLineNumber);\n            const range2 = new StickyRange(element2.symbol.range.startLineNumber, element2.symbol.range.endLineNumber);\n            return this.comparator(range1, range2);\n        });\n        for (const outlineElement of outlineElementsArray) {\n            stickyChildren.push(StickyOutlineElement.fromOutlineElement(outlineElement, outlineElement.symbol.selectionRange.startLineNumber));\n        }\n        const stickyOutlineElement = new StickyOutlineElement(undefined, stickyChildren, undefined);\n        return {\n            stickyOutlineElement: stickyOutlineElement,\n            providerID: preferredProvider\n        };\n    }\n    static findSumOfRangesOfGroup(outline) {\n        let res = 0;\n        for (const child of outline.children.values()) {\n            res += this.findSumOfRangesOfGroup(child);\n        }\n        if (outline instanceof OutlineElement) {\n            return res + outline.symbol.range.endLineNumber - outline.symbol.selectionRange.startLineNumber;\n        }\n        else {\n            return res;\n        }\n    }\n    static fromFoldingModel(foldingModel) {\n        const regions = foldingModel.regions;\n        const length = regions.length;\n        let range;\n        const stackOfParents = [];\n        const stickyOutlineElement = new StickyOutlineElement(undefined, [], undefined);\n        let parentStickyOutlineElement = stickyOutlineElement;\n        for (let i = 0; i < length; i++) {\n            range = new StickyRange(regions.getStartLineNumber(i), regions.getEndLineNumber(i) + 1);\n            while (stackOfParents.length !== 0 && (range.startLineNumber < stackOfParents[stackOfParents.length - 1].startLineNumber || range.endLineNumber > stackOfParents[stackOfParents.length - 1].endLineNumber)) {\n                stackOfParents.pop();\n                if (parentStickyOutlineElement.parent !== undefined) {\n                    parentStickyOutlineElement = parentStickyOutlineElement.parent;\n                }\n            }\n            const child = new StickyOutlineElement(range, [], parentStickyOutlineElement);\n            parentStickyOutlineElement.children.push(child);\n            parentStickyOutlineElement = child;\n            stackOfParents.push(range);\n        }\n        return stickyOutlineElement;\n    }\n    constructor(\n    /**\n     * Range of line numbers spanned by the current scope\n     */\n    range, \n    /**\n     * Must be sorted by start line number\n    */\n    children, \n    /**\n     * Parent sticky outline element\n     */\n    parent) {\n        this.range = range;\n        this.children = children;\n        this.parent = parent;\n    }\n}\nclass StickyOutlineModel {\n    constructor(uri, version, element, outlineProviderId) {\n        this.uri = uri;\n        this.version = version;\n        this.element = element;\n        this.outlineProviderId = outlineProviderId;\n    }\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA,IAAIA,UAAU,GAAI,IAAI,IAAI,IAAI,CAACA,UAAU,IAAK,UAAUC,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACnF,IAAIC,CAAC,GAAGC,SAAS,CAACC,MAAM;IAAEC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGH,MAAM,GAAGE,IAAI,KAAK,IAAI,GAAGA,IAAI,GAAGK,MAAM,CAACC,wBAAwB,CAACR,MAAM,EAAEC,GAAG,CAAC,GAAGC,IAAI;IAAEO,CAAC;EAC5H,IAAI,OAAOC,OAAO,KAAK,QAAQ,IAAI,OAAOA,OAAO,CAACC,QAAQ,KAAK,UAAU,EAAEL,CAAC,GAAGI,OAAO,CAACC,QAAQ,CAACZ,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,CAAC,CAAC,KAC1H,KAAK,IAAIU,CAAC,GAAGb,UAAU,CAACM,MAAM,GAAG,CAAC,EAAEO,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE,IAAIH,CAAC,GAAGV,UAAU,CAACa,CAAC,CAAC,EAAEN,CAAC,GAAG,CAACH,CAAC,GAAG,CAAC,GAAGM,CAAC,CAACH,CAAC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGM,CAAC,CAACT,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,GAAGG,CAAC,CAACT,MAAM,EAAEC,GAAG,CAAC,KAAKK,CAAC;EACjJ,OAAOH,CAAC,GAAG,CAAC,IAAIG,CAAC,IAAIC,MAAM,CAACM,cAAc,CAACb,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,EAAEA,CAAC;AACjE,CAAC;AACD,IAAIQ,OAAO,GAAI,IAAI,IAAI,IAAI,CAACA,OAAO,IAAK,UAAUC,UAAU,EAAEC,SAAS,EAAE;EACrE,OAAO,UAAUhB,MAAM,EAAEC,GAAG,EAAE;IAAEe,SAAS,CAAChB,MAAM,EAAEC,GAAG,EAAEc,UAAU,CAAC;EAAE,CAAC;AACzE,CAAC;AACD,IAAIE,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAK,UAAUC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACrF,SAASC,KAAKA,CAACC,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYH,CAAC,GAAGG,KAAK,GAAG,IAAIH,CAAC,CAAC,UAAUI,OAAO,EAAE;MAAEA,OAAO,CAACD,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKH,CAAC,KAAKA,CAAC,GAAGK,OAAO,CAAC,EAAE,UAAUD,OAAO,EAAEE,MAAM,EAAE;IACvD,SAASC,SAASA,CAACJ,KAAK,EAAE;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAACQ,IAAI,CAACN,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOO,CAAC,EAAE;QAAEJ,MAAM,CAACI,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASC,QAAQA,CAACR,KAAK,EAAE;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAAC,OAAO,CAAC,CAACE,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOO,CAAC,EAAE;QAAEJ,MAAM,CAACI,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASF,IAAIA,CAACI,MAAM,EAAE;MAAEA,MAAM,CAACC,IAAI,GAAGT,OAAO,CAACQ,MAAM,CAACT,KAAK,CAAC,GAAGD,KAAK,CAACU,MAAM,CAACT,KAAK,CAAC,CAACW,IAAI,CAACP,SAAS,EAAEI,QAAQ,CAAC;IAAE;IAC7GH,IAAI,CAAC,CAACP,SAAS,GAAGA,SAAS,CAACc,KAAK,CAACjB,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAEU,IAAI,EAAE,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACD,SAASO,UAAU,EAAEC,eAAe,QAAQ,sCAAsC;AAClF,SAASC,wBAAwB,QAAQ,8CAA8C;AACvF,SAASC,YAAY,EAAEC,cAAc,EAAEC,YAAY,QAAQ,+CAA+C;AAC1G,SAASC,uBAAuB,QAAQ,yCAAyC;AACjF,SAASC,gBAAgB,QAAQ,kCAAkC;AACnE,SAASC,OAAO,QAAQ,kCAAkC;AAC1D,SAASC,YAAY,QAAQ,mCAAmC;AAChE,SAASC,QAAQ,QAAQ,qCAAqC;AAC9D,SAASC,iBAAiB,QAAQ,kCAAkC;AACpE,SAASC,OAAO,QAAQ,sCAAsC;AAC9D,WAAaC,WAAW,gBAAAC,YAAA,CACpB,SAAAD,YAAYE,eAAe,EAAEC,aAAa,EAAE;EAAAC,eAAA,OAAAJ,WAAA;EACxC,IAAI,CAACE,eAAe,GAAGA,eAAe;EACtC,IAAI,CAACC,aAAa,GAAGA,aAAa;AACtC,CAAC;AAEL,WAAaE,mBAAmB,gBAAAJ,YAAA,CAC5B,SAAAI,oBAAYH,eAAe,EAAEC,aAAa,EAAEG,YAAY,EAAE;EAAAF,eAAA,OAAAC,mBAAA;EACtD,IAAI,CAACH,eAAe,GAAGA,eAAe;EACtC,IAAI,CAACC,aAAa,GAAGA,aAAa;EAClC,IAAI,CAACG,YAAY,GAAGA,YAAY;AACpC,CAAC;AAEL,IAAIC,2BAA2B,0BAAAC,WAAA;EAAAC,SAAA,CAAAF,2BAAA,EAAAC,WAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,2BAAA;EAC3B,SAAAA,4BAAYK,MAAM,EAAEC,uBAAuB,EAAE;IAAA,IAAAC,KAAA;IAAAV,eAAA,OAAAG,2BAAA;IACzCO,KAAA,GAAAJ,MAAA,CAAAK,IAAA;IACAD,KAAA,CAAKE,wBAAwB,GAAGF,KAAA,CAAKG,MAAM,CAACC,GAAG,CAAC,IAAIvB,OAAO,EAAE,CAAC;IAC9DmB,KAAA,CAAKK,uBAAuB,GAAGL,KAAA,CAAKE,wBAAwB,CAACI,KAAK;IAClEN,KAAA,CAAKO,aAAa,GAAG,IAAIjC,eAAe,EAAE;IAC1C0B,KAAA,CAAKQ,OAAO,GAAGV,MAAM;IACrBE,KAAA,CAAKS,wBAAwB,GAAGV,uBAAuB;IACvDC,KAAA,CAAKU,WAAW,GAAGV,KAAA,CAAKW,SAAS,CAAC,IAAI/B,gBAAgB,CAAC;MAAA,OAAMoB,KAAA,CAAKY,MAAM,EAAE;IAAA,GAAE,EAAE,CAAC,CAAC;IAChFZ,KAAA,CAAKW,SAAS,CAACX,KAAA,CAAKQ,OAAO,CAACK,wBAAwB,CAAC,UAAA9C,CAAC,EAAI;MACtD,IAAIA,CAAC,CAAC+C,UAAU,CAAC,GAAG,CAAC,gCAAgC,EAAE;QACnDd,KAAA,CAAKe,iBAAiB,EAAE;MAC5B;IACJ,CAAC,CAAC,CAAC;IACHf,KAAA,CAAKe,iBAAiB,EAAE;IAAC,OAAAf,KAAA;EAC7B;EAACb,YAAA,CAAAM,2BAAA;IAAAvD,GAAA;IAAAsB,KAAA,EACD,SAAAwD,QAAA,EAAU;MACNC,IAAA,CAAAC,eAAA,CAAAzB,2BAAA,CAAA0B,SAAA,oBAAAlB,IAAA;MACA,IAAI,CAACM,aAAa,CAACS,OAAO,EAAE;IAChC;EAAC;IAAA9E,GAAA;IAAAsB,KAAA,EACD,SAAAuD,kBAAA,EAAoB;MAAA,IAAAK,MAAA;MAChB,IAAMC,OAAO,GAAG,IAAI,CAACb,OAAO,CAACc,SAAS,CAAC,GAAG,CAAC,gCAAgC;MAC3E,IAAID,OAAO,CAACE,OAAO,KAAK,KAAK,EAAE;QAC3B,IAAI,CAAChB,aAAa,CAACiB,KAAK,EAAE;QAC1B;MACJ,CAAC,MACI;QACD,IAAI,CAACjB,aAAa,CAACH,GAAG,CAAC,IAAI,CAACI,OAAO,CAACiB,gBAAgB,CAAC,YAAM;UACvDL,MAAI,CAACR,MAAM,EAAE;QACjB,CAAC,CAAC,CAAC;QACH,IAAI,CAACL,aAAa,CAACH,GAAG,CAAC,IAAI,CAACI,OAAO,CAACkB,sBAAsB,CAAC;UAAA,OAAMN,MAAI,CAACR,MAAM,EAAE;QAAA,EAAC,CAAC;QAChF,IAAI,CAACL,aAAa,CAACH,GAAG,CAAC,IAAI,CAACI,OAAO,CAACmB,uBAAuB,CAAC;UAAA,OAAMP,MAAI,CAACV,WAAW,CAACkB,QAAQ,EAAE;QAAA,EAAC,CAAC;QAC/F,IAAI,CAACrB,aAAa,CAACH,GAAG,CAAC,IAAI,CAACK,wBAAwB,CAACoB,sBAAsB,CAACC,WAAW,CAAC,YAAM;UAC1FV,MAAI,CAACR,MAAM,EAAE;QACjB,CAAC,CAAC,CAAC;QACH,IAAI,CAACA,MAAM,EAAE;MACjB;IACJ;EAAC;IAAA1E,GAAA;IAAAsB,KAAA,EACD,SAAAuE,aAAA,EAAe;MACX,IAAIC,EAAE;MACN,OAAO,CAACA,EAAE,GAAG,IAAI,CAACC,MAAM,MAAM,IAAI,IAAID,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACE,OAAO;IAC7E;EAAC;IAAAhG,GAAA;IAAAsB,KAAA,EACD,SAAAoD,OAAA,EAAS;MACL,IAAIoB,EAAE;MACN,OAAO9E,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,eAAAiF,mBAAA,GAAAC,IAAA,CAAE,SAAAC,QAAA;QAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAA1E,IAAA;YAAA;cACnC,CAACkE,EAAE,GAAG,IAAI,CAACU,IAAI,MAAM,IAAI,IAAIV,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAChB,OAAO,CAAC,IAAI,CAAC;cACtE,IAAI,CAAC0B,IAAI,GAAG,IAAI/D,uBAAuB,EAAE;cAAC6D,QAAA,CAAA1E,IAAA;cAC1C,OAAM,IAAI,CAAC6E,kBAAkB,CAAC,IAAI,CAACD,IAAI,CAACE,KAAK,CAAC;YAAA;cAC9C,IAAI,CAAC1C,wBAAwB,CAAC2C,IAAI,EAAE;YAAC;YAAA;cAAA,OAAAL,QAAA,CAAAM,IAAA;UAAA;QAAA,GAAAT,OAAA;MAAA,CACxC,EAAC;IACN;EAAC;IAAAnG,GAAA;IAAAsB,KAAA,EACD,SAAAmF,mBAAmBC,KAAK,EAAE;MACtB,IAAIZ,EAAE;MACN,OAAO9E,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,eAAAiF,mBAAA,GAAAC,IAAA,CAAE,SAAAW,SAAA;QAAA,IAAAC,MAAA;QAAA,IAAAC,KAAA,EAAAC,cAAA,EAAAC,gBAAA,EAAAC,WAAA,EAAAC,YAAA,EAAAC,qBAAA,EAAAC,oBAAA,EAAAC,UAAA,EAAAC,iBAAA,EAAAC,YAAA,EAAAC,cAAA;QAAA,OAAAxB,mBAAA,GAAAG,IAAA,UAAAsB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAApB,IAAA,GAAAoB,SAAA,CAAA/F,IAAA;YAAA;cAAA,IAC9B,IAAI,CAAC0C,OAAO,CAACsD,QAAQ,EAAE;gBAAAD,SAAA,CAAA/F,IAAA;gBAAA;cAAA;cAAA,OAAA+F,SAAA,CAAAE,MAAA;YAAA;cAGtBd,KAAK,GAAG,IAAI,CAACzC,OAAO,CAACwD,QAAQ,EAAE;cAC/Bd,cAAc,GAAGD,KAAK,CAAClB,YAAY,EAAE;cACrCoB,gBAAgB,GAAG,IAAI,CAAClB,MAAM,GAAG,CAAChD,OAAO,CAAC,IAAI,CAACgD,MAAM,CAACgC,GAAG,EAAEhB,KAAK,CAACgB,GAAG,CAAC,GAAG,KAAK,EACnF;cACMb,WAAW,GAAGD,gBAAgB,GAAGe,UAAU,CAAC,YAAM;gBACpD,IAAI,CAACtB,KAAK,CAACuB,uBAAuB,EAAE;kBAChCnB,MAAI,CAACf,MAAM,GAAG,IAAImC,kBAAkB,CAACnB,KAAK,CAACgB,GAAG,EAAEhB,KAAK,CAAClB,YAAY,EAAE,EAAEsC,SAAS,EAAEA,SAAS,CAAC;kBAC3FrB,MAAI,CAAC9C,wBAAwB,CAAC2C,IAAI,EAAE;gBACxC;cACJ,CAAC,EAAE,EAAE,CAAC,GAAGwB,SAAS,EAClB;cAAAR,SAAA,CAAA/F,IAAA;cACqB,OAAMU,YAAY,CAAC8F,MAAM,CAAC,IAAI,CAAC7D,wBAAwB,CAACoB,sBAAsB,EAAEoB,KAAK,EAAEL,KAAK,CAAC;YAAA;cAA5GS,YAAY,GAAAQ,SAAA,CAAAU,IAAA;cAAA,KACd3B,KAAK,CAACuB,uBAAuB;gBAAAN,SAAA,CAAA/F,IAAA;gBAAA;cAAA;cAAA,OAAA+F,SAAA,CAAAE,MAAA;YAAA;cAAA,MAG7BV,YAAY,CAACmB,QAAQ,CAACC,IAAI,KAAK,CAAC;gBAAAZ,SAAA,CAAA/F,IAAA;gBAAA;cAAA;cAAAwF,qBAAA,GACaoB,oBAAoB,CAACC,gBAAgB,CAACtB,YAAY,EAAE,CAACrB,EAAE,GAAG,IAAI,CAACC,MAAM,MAAM,IAAI,IAAID,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC4C,iBAAiB,CAAC,EAAtKrB,oBAAoB,GAAAD,qBAAA,CAApBC,oBAAoB,EAAEC,UAAU,GAAAF,qBAAA,CAAVE,UAAU;cACxC,IAAI,CAACvB,MAAM,GAAG,IAAImC,kBAAkB,CAACnB,KAAK,CAACgB,GAAG,EAAEf,cAAc,EAAEK,oBAAoB,EAAEC,UAAU,CAAC;cAACK,SAAA,CAAA/F,IAAA;cAAA;YAAA;cAG5F2F,iBAAiB,GAAGzE,iBAAiB,CAAC6F,GAAG,CAAC,IAAI,CAACrE,OAAO,CAAC;cAAAqD,SAAA,CAAA/F,IAAA;cACxC,OAAO2F,iBAAiB,KAAK,IAAI,IAAIA,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,iBAAiB,CAACqB,eAAe,EAAE;YAAC;cAAhIpB,YAAY,GAAAG,SAAA,CAAAU,IAAA;cAAA,KACd3B,KAAK,CAACuB,uBAAuB;gBAAAN,SAAA,CAAA/F,IAAA;gBAAA;cAAA;cAAA,OAAA+F,SAAA,CAAAE,MAAA;YAAA;cAGjC,IAAIL,YAAY,IAAIA,YAAY,CAACqB,OAAO,CAACzI,MAAM,KAAK,CAAC,EAAE;gBAC7CqH,cAAc,GAAGe,oBAAoB,CAACM,gBAAgB,CAACtB,YAAY,CAAC;gBAC1E,IAAI,CAACzB,MAAM,GAAG,IAAImC,kBAAkB,CAACnB,KAAK,CAACgB,GAAG,EAAEf,cAAc,EAAES,cAAc,EAAEU,SAAS,CAAC;cAC9F,CAAC,MACI;gBACD,IAAI,CAACpC,MAAM,GAAGoC,SAAS;cAC3B;YAAC;cAELY,YAAY,CAAC7B,WAAW,CAAC;YAAC;YAAA;cAAA,OAAAS,SAAA,CAAAf,IAAA;UAAA;QAAA,GAAAC,QAAA;MAAA,CAC7B,EAAC;IACN;EAAC;IAAA7G,GAAA;IAAAsB,KAAA,EACD,SAAA0H,YAAYC,KAAK,EAAE;MACf,IAAIA,KAAK,KAAK,CAAC,CAAC,EAAE;QACdA,KAAK,GAAG,CAAC;MACb,CAAC,MACI,IAAIA,KAAK,GAAG,CAAC,EAAE;QAChBA,KAAK,GAAG,CAACA,KAAK,GAAG,CAAC;MACtB;MACA,OAAOA,KAAK;IAChB;EAAC;IAAAjJ,GAAA;IAAAsB,KAAA,EACD,SAAA4H,+CAA+CC,KAAK,EAAEhC,YAAY,EAAEpF,MAAM,EAAEqH,KAAK,EAAEC,mBAAmB,EAAE;MACpG,IAAIlC,YAAY,CAACmB,QAAQ,CAAClI,MAAM,KAAK,CAAC,EAAE;QACpC;MACJ;MACA,IAAIkJ,QAAQ,GAAGD,mBAAmB;MAClC,IAAME,kBAAkB,GAAG,EAAE;MAC7B,KAAK,IAAI5I,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwG,YAAY,CAACmB,QAAQ,CAAClI,MAAM,EAAEO,CAAC,EAAE,EAAE;QACnD,IAAM6I,KAAK,GAAGrC,YAAY,CAACmB,QAAQ,CAAC3H,CAAC,CAAC;QACtC,IAAI6I,KAAK,CAACL,KAAK,EAAE;UACbI,kBAAkB,CAACE,IAAI,CAACD,KAAK,CAACL,KAAK,CAACjG,eAAe,CAAC;QACxD;MACJ;MACA,IAAMwG,UAAU,GAAG,IAAI,CAACV,WAAW,CAACpG,YAAY,CAAC2G,kBAAkB,EAAEJ,KAAK,CAACjG,eAAe,EAAE,UAACyG,CAAC,EAAEC,CAAC,EAAK;QAAE,OAAOD,CAAC,GAAGC,CAAC;MAAE,CAAC,CAAC,CAAC;MACzH,IAAMC,UAAU,GAAG,IAAI,CAACb,WAAW,CAACpG,YAAY,CAAC2G,kBAAkB,EAAEJ,KAAK,CAACjG,eAAe,GAAGkG,KAAK,EAAE,UAACO,CAAC,EAAEC,CAAC,EAAK;QAAE,OAAOD,CAAC,GAAGC,CAAC;MAAE,CAAC,CAAC,CAAC;MACjI,KAAK,IAAIjJ,EAAC,GAAG+I,UAAU,EAAE/I,EAAC,IAAIkJ,UAAU,EAAElJ,EAAC,EAAE,EAAE;QAC3C,IAAM6I,MAAK,GAAGrC,YAAY,CAACmB,QAAQ,CAAC3H,EAAC,CAAC;QACtC,IAAI,CAAC6I,MAAK,EAAE;UACR;QACJ;QACA,IAAIA,MAAK,CAACL,KAAK,EAAE;UACb,IAAMW,cAAc,GAAGN,MAAK,CAACL,KAAK,CAACjG,eAAe;UAClD,IAAM6G,YAAY,GAAGP,MAAK,CAACL,KAAK,CAAChG,aAAa;UAC9C,IAAIgG,KAAK,CAACjG,eAAe,IAAI6G,YAAY,GAAG,CAAC,IAAID,cAAc,GAAG,CAAC,IAAIX,KAAK,CAAChG,aAAa,IAAI2G,cAAc,KAAKR,QAAQ,EAAE;YACvHA,QAAQ,GAAGQ,cAAc;YACzB/H,MAAM,CAAC0H,IAAI,CAAC,IAAIpG,mBAAmB,CAACyG,cAAc,EAAEC,YAAY,GAAG,CAAC,EAAEX,KAAK,GAAG,CAAC,CAAC,CAAC;YACjF,IAAI,CAACF,8CAA8C,CAACC,KAAK,EAAEK,MAAK,EAAEzH,MAAM,EAAEqH,KAAK,GAAG,CAAC,EAAEU,cAAc,CAAC;UACxG;QACJ,CAAC,MACI;UACD,IAAI,CAACZ,8CAA8C,CAACC,KAAK,EAAEK,MAAK,EAAEzH,MAAM,EAAEqH,KAAK,EAAEC,mBAAmB,CAAC;QACzG;MACJ;IACJ;EAAC;IAAArJ,GAAA;IAAAsB,KAAA,EACD,SAAA0I,oCAAoCb,KAAK,EAAE;MACvC,IAAIrD,EAAE,EAAEmE,EAAE;MACV,IAAI,EAAE,CAACnE,EAAE,GAAG,IAAI,CAACC,MAAM,MAAM,IAAI,IAAID,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACoE,OAAO,CAAC,EAAE;QACvE,OAAO,EAAE;MACb;MACA,IAAIC,oBAAoB,GAAG,EAAE;MAC7B,IAAI,CAACjB,8CAA8C,CAACC,KAAK,EAAE,IAAI,CAACpD,MAAM,CAACmE,OAAO,EAAEC,oBAAoB,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;MAC5G,IAAMC,YAAY,GAAG,CAACH,EAAE,GAAG,IAAI,CAAC3F,OAAO,CAAC+F,aAAa,EAAE,MAAM,IAAI,IAAIJ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACK,cAAc,EAAE;MACjH,IAAIF,YAAY,EAAE;QAAA,IAAAG,SAAA,GAAAC,0BAAA,CACYJ,YAAY;UAAAK,KAAA;QAAA;UAAA,IAAAC,KAAA,YAAAA,MAAA,EAAE;YAAA,IAA7BC,WAAW,GAAAF,KAAA,CAAAnJ,KAAA;YAClB6I,oBAAoB,GAAGA,oBAAoB,CAACS,MAAM,CAAC,UAAAC,UAAU;cAAA,OAAI,EAAEA,UAAU,CAAC3H,eAAe,IAAIyH,WAAW,CAACzH,eAAe,IAAI2H,UAAU,CAAC1H,aAAa,IAAIwH,WAAW,CAACxH,aAAa,GAAG,CAAC,CAAC;YAAA,EAAC;UAC/L,CAAC;UAFD,KAAAoH,SAAA,CAAAO,CAAA,MAAAL,KAAA,GAAAF,SAAA,CAAAQ,CAAA,IAAA/I,IAAA;YAAA0I,KAAA;UAAA;QAEC,SAAAM,GAAA;UAAAT,SAAA,CAAA1I,CAAA,CAAAmJ,GAAA;QAAA;UAAAT,SAAA,CAAAU,CAAA;QAAA;MACL;MACA,OAAOd,oBAAoB;IAC/B;EAAC;EAAA,OAAA5G,2BAAA;AAAA,EArJuEpB,UAAU,CAsJrF;AACDoB,2BAA2B,GAAG1D,UAAU,CAAC,CACrCgB,OAAO,CAAC,CAAC,EAAEwB,wBAAwB,CAAC,CACvC,EAAEkB,2BAA2B,CAAC;AAC/B,SAASA,2BAA2B;AAAG,IACjCiF,oBAAoB;EAuGtB,SAAAA;EACA;AACJ;AACA;EACIW,KAAK;EACL;AACJ;AACA;EACIb,QAAQ;EACR;AACJ;AACA;EACI4C,MAAM,EAAE;IAAA9H,eAAA,OAAAoF,oBAAA;IACJ,IAAI,CAACW,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACb,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAAC4C,MAAM,GAAGA,MAAM;EACxB;EAACjI,YAAA,CAAAuF,oBAAA;IAAAxI,GAAA;IAAAsB,KAAA,EAtHD,SAAA6J,WAAkBC,MAAM,EAAEC,MAAM,EAAE;MAC9B,IAAID,MAAM,CAAClI,eAAe,KAAKmI,MAAM,CAACnI,eAAe,EAAE;QACnD,OAAOkI,MAAM,CAAClI,eAAe,GAAGmI,MAAM,CAACnI,eAAe;MAC1D,CAAC,MACI;QACD,OAAOmI,MAAM,CAAClI,aAAa,GAAGiI,MAAM,CAACjI,aAAa;MACtD;IACJ;EAAC;IAAAnD,GAAA;IAAAsB,KAAA,EACD,SAAAgK,mBAA0BC,cAAc,EAAEC,iBAAiB,EAAE;MAAA,IAAAC,MAAA;MACzD,IAAMnD,QAAQ,GAAG,EAAE;MAAC,IAAAoD,UAAA,GAAAlB,0BAAA,CACAe,cAAc,CAACjD,QAAQ,CAACqD,MAAM,EAAE;QAAAC,MAAA;MAAA;QAApD,KAAAF,UAAA,CAAAZ,CAAA,MAAAc,MAAA,GAAAF,UAAA,CAAAX,CAAA,IAAA/I,IAAA,GAAsD;UAAA,IAA3CwH,KAAK,GAAAoC,MAAA,CAAAtK,KAAA;UACZ,IAAIkI,KAAK,CAACqC,MAAM,CAACC,cAAc,CAAC5I,eAAe,KAAKsG,KAAK,CAACqC,MAAM,CAAC1C,KAAK,CAAChG,aAAa,EAAE;YAClF,IAAIqG,KAAK,CAACqC,MAAM,CAACC,cAAc,CAAC5I,eAAe,KAAKsI,iBAAiB,EAAE;cACnElD,QAAQ,CAACmB,IAAI,CAACjB,oBAAoB,CAAC8C,kBAAkB,CAAC9B,KAAK,EAAEA,KAAK,CAACqC,MAAM,CAACC,cAAc,CAAC5I,eAAe,CAAC,CAAC;YAC9G,CAAC,MACI;cAAA,IAAA6I,UAAA,GAAAvB,0BAAA,CACsBhB,KAAK,CAAClB,QAAQ,CAACqD,MAAM,EAAE;gBAAAK,MAAA;cAAA;gBAA9C,KAAAD,UAAA,CAAAjB,CAAA,MAAAkB,MAAA,GAAAD,UAAA,CAAAhB,CAAA,IAAA/I,IAAA,GAAgD;kBAAA,IAArCiK,QAAQ,GAAAD,MAAA,CAAA1K,KAAA;kBACfgH,QAAQ,CAACmB,IAAI,CAACjB,oBAAoB,CAAC8C,kBAAkB,CAACW,QAAQ,EAAEzC,KAAK,CAACqC,MAAM,CAACC,cAAc,CAAC5I,eAAe,CAAC,CAAC;gBACjH;cAAC,SAAA8H,GAAA;gBAAAe,UAAA,CAAAlK,CAAA,CAAAmJ,GAAA;cAAA;gBAAAe,UAAA,CAAAd,CAAA;cAAA;YACL;UACJ;QACJ;MAAC,SAAAD,GAAA;QAAAU,UAAA,CAAA7J,CAAA,CAAAmJ,GAAA;MAAA;QAAAU,UAAA,CAAAT,CAAA;MAAA;MACD3C,QAAQ,CAAC4D,IAAI,CAAC,UAACC,MAAM,EAAEC,MAAM;QAAA,OAAKX,MAAI,CAACN,UAAU,CAACgB,MAAM,CAAChD,KAAK,EAAEiD,MAAM,CAACjD,KAAK,CAAC;MAAA,EAAC;MAC9E,IAAMA,KAAK,GAAG,IAAInG,WAAW,CAACuI,cAAc,CAACM,MAAM,CAACC,cAAc,CAAC5I,eAAe,EAAEqI,cAAc,CAACM,MAAM,CAAC1C,KAAK,CAAChG,aAAa,CAAC;MAC9H,OAAO,IAAIqF,oBAAoB,CAACW,KAAK,EAAEb,QAAQ,EAAEH,SAAS,CAAC;IAC/D;EAAC;IAAAnI,GAAA;IAAAsB,KAAA,EACD,SAAAmH,iBAAwBtB,YAAY,EAAEkF,iBAAiB,EAAE;MAAA,IAAAC,MAAA;MACrD,IAAIC,eAAe;MACnB;MACA,IAAI1J,QAAQ,CAAC2J,KAAK,CAACrF,YAAY,CAACmB,QAAQ,CAACqD,MAAM,EAAE,CAAC,YAAYnJ,YAAY,EAAE;QACxE,IAAMiK,QAAQ,GAAG5J,QAAQ,CAAC6J,IAAI,CAACvF,YAAY,CAACmB,QAAQ,CAACqD,MAAM,EAAE,EAAE,UAAAgB,mBAAmB;UAAA,OAAIA,mBAAmB,CAACC,EAAE,KAAKP,iBAAiB;QAAA,EAAC;QACnI,IAAII,QAAQ,EAAE;UACVF,eAAe,GAAGE,QAAQ,CAACnE,QAAQ;QACvC,CAAC,MACI;UACD,IAAIuE,MAAM,GAAG,EAAE;UACf,IAAIC,mBAAmB,GAAG,CAAC,CAAC;UAC5B,IAAIC,mBAAmB,GAAG5E,SAAS;UAAC,IAAA6E,UAAA,GAAAxC,0BAAA,CACDrD,YAAY,CAACmB,QAAQ,CAAC2E,OAAO,EAAE;YAAAC,MAAA;UAAA;YAAlE,KAAAF,UAAA,CAAAlC,CAAA,MAAAoC,MAAA,GAAAF,UAAA,CAAAjC,CAAA,IAAA/I,IAAA,GAAoE;cAAA,IAAAmL,YAAA,GAAAC,cAAA,CAAAF,MAAA,CAAA5L,KAAA;gBAAxD+L,IAAI,GAAAF,YAAA;gBAAEG,YAAY,GAAAH,YAAA;cAC1B,IAAMI,cAAc,GAAG/E,oBAAoB,CAACgF,sBAAsB,CAACF,YAAY,CAAC;cAChF,IAAIC,cAAc,GAAGT,mBAAmB,EAAE;gBACtCC,mBAAmB,GAAGO,YAAY;gBAClCR,mBAAmB,GAAGS,cAAc;gBACpCV,MAAM,GAAGS,YAAY,CAACV,EAAE;cAC5B;YACJ;UAAC,SAAA5B,GAAA;YAAAgC,UAAA,CAAAnL,CAAA,CAAAmJ,GAAA;UAAA;YAAAgC,UAAA,CAAA/B,CAAA;UAAA;UACDoB,iBAAiB,GAAGQ,MAAM;UAC1BN,eAAe,GAAGQ,mBAAmB,CAACzE,QAAQ;QAClD;MACJ,CAAC,MACI;QACDiE,eAAe,GAAGpF,YAAY,CAACmB,QAAQ;MAC3C;MACA,IAAMmF,cAAc,GAAG,EAAE;MACzB,IAAMC,oBAAoB,GAAGC,KAAK,CAACC,IAAI,CAACrB,eAAe,CAACZ,MAAM,EAAE,CAAC,CAACO,IAAI,CAAC,UAAC2B,QAAQ,EAAEC,QAAQ,EAAK;QAC3F,IAAM1C,MAAM,GAAG,IAAIpI,WAAW,CAAC6K,QAAQ,CAAChC,MAAM,CAAC1C,KAAK,CAACjG,eAAe,EAAE2K,QAAQ,CAAChC,MAAM,CAAC1C,KAAK,CAAChG,aAAa,CAAC;QAC1G,IAAMkI,MAAM,GAAG,IAAIrI,WAAW,CAAC8K,QAAQ,CAACjC,MAAM,CAAC1C,KAAK,CAACjG,eAAe,EAAE4K,QAAQ,CAACjC,MAAM,CAAC1C,KAAK,CAAChG,aAAa,CAAC;QAC1G,OAAOmJ,MAAI,CAACnB,UAAU,CAACC,MAAM,EAAEC,MAAM,CAAC;MAC1C,CAAC,CAAC;MAAC,IAAA0C,UAAA,GAAAvD,0BAAA,CAC0BkD,oBAAoB;QAAAM,MAAA;MAAA;QAAjD,KAAAD,UAAA,CAAAjD,CAAA,MAAAkD,MAAA,GAAAD,UAAA,CAAAhD,CAAA,IAAA/I,IAAA,GAAmD;UAAA,IAAxCuJ,cAAc,GAAAyC,MAAA,CAAA1M,KAAA;UACrBmM,cAAc,CAAChE,IAAI,CAACjB,oBAAoB,CAAC8C,kBAAkB,CAACC,cAAc,EAAEA,cAAc,CAACM,MAAM,CAACC,cAAc,CAAC5I,eAAe,CAAC,CAAC;QACtI;MAAC,SAAA8H,GAAA;QAAA+C,UAAA,CAAAlM,CAAA,CAAAmJ,GAAA;MAAA;QAAA+C,UAAA,CAAA9C,CAAA;MAAA;MACD,IAAM5D,oBAAoB,GAAG,IAAImB,oBAAoB,CAACL,SAAS,EAAEsF,cAAc,EAAEtF,SAAS,CAAC;MAC3F,OAAO;QACHd,oBAAoB,EAAEA,oBAAoB;QAC1CC,UAAU,EAAE+E;MAChB,CAAC;IACL;EAAC;IAAArM,GAAA;IAAAsB,KAAA,EACD,SAAAkM,uBAA8BS,OAAO,EAAE;MACnC,IAAIC,GAAG,GAAG,CAAC;MAAC,IAAAC,UAAA,GAAA3D,0BAAA,CACQyD,OAAO,CAAC3F,QAAQ,CAACqD,MAAM,EAAE;QAAAyC,MAAA;MAAA;QAA7C,KAAAD,UAAA,CAAArD,CAAA,MAAAsD,MAAA,GAAAD,UAAA,CAAApD,CAAA,IAAA/I,IAAA,GAA+C;UAAA,IAApCwH,KAAK,GAAA4E,MAAA,CAAA9M,KAAA;UACZ4M,GAAG,IAAI,IAAI,CAACV,sBAAsB,CAAChE,KAAK,CAAC;QAC7C;MAAC,SAAAwB,GAAA;QAAAmD,UAAA,CAAAtM,CAAA,CAAAmJ,GAAA;MAAA;QAAAmD,UAAA,CAAAlD,CAAA;MAAA;MACD,IAAIgD,OAAO,YAAY1L,cAAc,EAAE;QACnC,OAAO2L,GAAG,GAAGD,OAAO,CAACpC,MAAM,CAAC1C,KAAK,CAAChG,aAAa,GAAG8K,OAAO,CAACpC,MAAM,CAACC,cAAc,CAAC5I,eAAe;MACnG,CAAC,MACI;QACD,OAAOgL,GAAG;MACd;IACJ;EAAC;IAAAlO,GAAA;IAAAsB,KAAA,EACD,SAAAwH,iBAAwBtB,YAAY,EAAE;MAClC,IAAMqB,OAAO,GAAGrB,YAAY,CAACqB,OAAO;MACpC,IAAMzI,MAAM,GAAGyI,OAAO,CAACzI,MAAM;MAC7B,IAAI+I,KAAK;MACT,IAAMkF,cAAc,GAAG,EAAE;MACzB,IAAMhH,oBAAoB,GAAG,IAAImB,oBAAoB,CAACL,SAAS,EAAE,EAAE,EAAEA,SAAS,CAAC;MAC/E,IAAImG,0BAA0B,GAAGjH,oBAAoB;MACrD,KAAK,IAAI1G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,MAAM,EAAEO,CAAC,EAAE,EAAE;QAC7BwI,KAAK,GAAG,IAAInG,WAAW,CAAC6F,OAAO,CAAC0F,kBAAkB,CAAC5N,CAAC,CAAC,EAAEkI,OAAO,CAAC2F,gBAAgB,CAAC7N,CAAC,CAAC,GAAG,CAAC,CAAC;QACvF,OAAO0N,cAAc,CAACjO,MAAM,KAAK,CAAC,KAAK+I,KAAK,CAACjG,eAAe,GAAGmL,cAAc,CAACA,cAAc,CAACjO,MAAM,GAAG,CAAC,CAAC,CAAC8C,eAAe,IAAIiG,KAAK,CAAChG,aAAa,GAAGkL,cAAc,CAACA,cAAc,CAACjO,MAAM,GAAG,CAAC,CAAC,CAAC+C,aAAa,CAAC,EAAE;UACxMkL,cAAc,CAACI,GAAG,EAAE;UACpB,IAAIH,0BAA0B,CAACpD,MAAM,KAAK/C,SAAS,EAAE;YACjDmG,0BAA0B,GAAGA,0BAA0B,CAACpD,MAAM;UAClE;QACJ;QACA,IAAM1B,KAAK,GAAG,IAAIhB,oBAAoB,CAACW,KAAK,EAAE,EAAE,EAAEmF,0BAA0B,CAAC;QAC7EA,0BAA0B,CAAChG,QAAQ,CAACmB,IAAI,CAACD,KAAK,CAAC;QAC/C8E,0BAA0B,GAAG9E,KAAK;QAClC6E,cAAc,CAAC5E,IAAI,CAACN,KAAK,CAAC;MAC9B;MACA,OAAO9B,oBAAoB;IAC/B;EAAC;EAAA,OAAAmB,oBAAA;AAAA;AAAA,IAmBCN,kBAAkB,gBAAAjF,YAAA,CACpB,SAAAiF,mBAAYH,GAAG,EAAE/B,OAAO,EAAEkE,OAAO,EAAExB,iBAAiB,EAAE;EAAAtF,eAAA,OAAA8E,kBAAA;EAClD,IAAI,CAACH,GAAG,GAAGA,GAAG;EACd,IAAI,CAAC/B,OAAO,GAAGA,OAAO;EACtB,IAAI,CAACkE,OAAO,GAAGA,OAAO;EACtB,IAAI,CAACxB,iBAAiB,GAAGA,iBAAiB;AAC9C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}