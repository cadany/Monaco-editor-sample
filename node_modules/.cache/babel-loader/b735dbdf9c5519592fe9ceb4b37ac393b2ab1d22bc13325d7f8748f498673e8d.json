{"ast":null,"code":"import _toConsumableArray from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n  var colors = [];\n  var providers = registry.ordered(model).reverse();\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideDocumentColors(model, token)).then(function (result) {\n      if (Array.isArray(result)) {\n        var _iterator = _createForOfIteratorHelper(result),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var colorInfo = _step.value;\n            colors.push({\n              colorInfo: colorInfo,\n              provider: provider\n            });\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n    });\n  });\n  return Promise.all(promises).then(function () {\n    return colors;\n  });\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n  return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  var resource = args[0];\n  if (!(resource instanceof URI)) {\n    throw illegalArgument();\n  }\n  var _accessor$get = accessor.get(ILanguageFeaturesService),\n    colorProviderRegistry = _accessor$get.colorProvider;\n  var model = accessor.get(IModelService).getModel(resource);\n  if (!model) {\n    throw illegalArgument();\n  }\n  var rawCIs = [];\n  var providers = colorProviderRegistry.ordered(model).reverse();\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(function (result) {\n      if (Array.isArray(result)) {\n        var _iterator2 = _createForOfIteratorHelper(result),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var ci = _step2.value;\n            rawCIs.push({\n              range: ci.range,\n              color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha]\n            });\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n    });\n  });\n  return Promise.all(promises).then(function () {\n    return rawCIs;\n  });\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  var color = args[0],\n    context = args[1];\n  var uri = context.uri,\n    range = context.range;\n  if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n    throw illegalArgument();\n  }\n  var _color = _slicedToArray(color, 4),\n    red = _color[0],\n    green = _color[1],\n    blue = _color[2],\n    alpha = _color[3];\n  var _accessor$get2 = accessor.get(ILanguageFeaturesService),\n    colorProviderRegistry = _accessor$get2.colorProvider;\n  var model = accessor.get(IModelService).getModel(uri);\n  if (!model) {\n    throw illegalArgument();\n  }\n  var colorInfo = {\n    range: range,\n    color: {\n      red: red,\n      green: green,\n      blue: blue,\n      alpha: alpha\n    }\n  };\n  var presentations = [];\n  var providers = colorProviderRegistry.ordered(model).reverse();\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(function (result) {\n      if (Array.isArray(result)) {\n        presentations.push.apply(presentations, _toConsumableArray(result));\n      }\n    });\n  });\n  return Promise.all(promises).then(function () {\n    return presentations;\n  });\n});","map":{"version":3,"names":["CancellationToken","illegalArgument","URI","Range","IModelService","CommandsRegistry","ILanguageFeaturesService","getColors","registry","model","token","colors","providers","ordered","reverse","promises","map","provider","Promise","resolve","provideDocumentColors","then","result","Array","isArray","_iterator","_createForOfIteratorHelper","_step","s","n","done","colorInfo","value","push","err","e","f","all","getColorPresentations","provideColorPresentations","registerCommand","accessor","_len","arguments","length","args","_key","resource","_accessor$get","get","colorProviderRegistry","colorProvider","getModel","rawCIs","None","_iterator2","_step2","ci","range","color","red","green","blue","alpha","_len2","_key2","context","uri","isIRange","_color","_slicedToArray","_accessor$get2","presentations","apply","_toConsumableArray"],"sources":["/Users/cadany/WebstormProjects/monaco/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n    const colors = [];\n    const providers = registry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, token)).then(result => {\n        if (Array.isArray(result)) {\n            for (const colorInfo of result) {\n                colors.push({ colorInfo, provider });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => colors);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const rawCIs = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            for (const ci of result) {\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => rawCIs);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const [red, green, blue, alpha] = color;\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const colorInfo = {\n        range,\n        color: { red, green, blue, alpha }\n    };\n    const presentations = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            presentations.push(...result);\n        }\n    }));\n    return Promise.all(promises).then(() => presentations);\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}