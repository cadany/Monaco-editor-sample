{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _classCallCheck from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { StickyScrollWidget, StickyScrollWidgetState } from './stickyScrollWidget.js';\nimport { StickyLineCandidateProvider, StickyRange } from './stickyScrollProvider.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nvar StickyScrollController = /*#__PURE__*/function (_Disposable) {\n  _inherits(StickyScrollController, _Disposable);\n  var _super = _createSuper(StickyScrollController);\n  function StickyScrollController(_editor, _contextMenuService, languageFeaturesService, instaService) {\n    var _this;\n    _classCallCheck(this, StickyScrollController);\n    _this = _super.call(this);\n    _this._editor = _editor;\n    _this._contextMenuService = _contextMenuService;\n    _this._sessionStore = new DisposableStore();\n    _this._maxStickyLines = Number.MAX_SAFE_INTEGER;\n    _this._stickyScrollWidget = new StickyScrollWidget(_this._editor, languageFeaturesService, instaService);\n    _this._stickyLineCandidateProvider = new StickyLineCandidateProvider(_this._editor, languageFeaturesService);\n    _this._widgetState = new StickyScrollWidgetState([], 0);\n    _this._register(_this._stickyScrollWidget);\n    _this._register(_this._stickyLineCandidateProvider);\n    _this._register(_this._editor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(109 /* EditorOption.stickyScroll */)) {\n        _this._readConfiguration();\n      }\n    }));\n    _this._readConfiguration();\n    _this._register(dom.addDisposableListener(_this._stickyScrollWidget.getDomNode(), dom.EventType.CONTEXT_MENU, function (event) {\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this._onContextMenu(event);\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n    }));\n    return _this;\n  }\n  _createClass(StickyScrollController, [{\n    key: \"_onContextMenu\",\n    value: function _onContextMenu(event) {\n      this._contextMenuService.showContextMenu({\n        menuId: MenuId.StickyScrollContext,\n        getAnchor: function getAnchor() {\n          return event;\n        }\n      });\n    }\n  }, {\n    key: \"_readConfiguration\",\n    value: function _readConfiguration() {\n      var _this2 = this;\n      var options = this._editor.getOption(109 /* EditorOption.stickyScroll */);\n      if (options.enabled === false) {\n        this._editor.removeOverlayWidget(this._stickyScrollWidget);\n        this._sessionStore.clear();\n        return;\n      } else {\n        this._editor.addOverlayWidget(this._stickyScrollWidget);\n        this._sessionStore.add(this._editor.onDidScrollChange(function () {\n          return _this2._renderStickyScroll();\n        }));\n        this._sessionStore.add(this._editor.onDidLayoutChange(function () {\n          return _this2._onDidResize();\n        }));\n        this._sessionStore.add(this._editor.onDidChangeModelTokens(function (e) {\n          return _this2._onTokensChange(e);\n        }));\n        this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(function () {\n          return _this2._renderStickyScroll();\n        }));\n        var lineNumberOption = this._editor.getOption(64 /* EditorOption.lineNumbers */);\n        if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n          this._sessionStore.add(this._editor.onDidChangeCursorPosition(function () {\n            return _this2._renderStickyScroll();\n          }));\n        }\n      }\n    }\n  }, {\n    key: \"_needsUpdate\",\n    value: function _needsUpdate(event) {\n      var stickyLineNumbers = this._stickyScrollWidget.getCurrentLines();\n      var _iterator = _createForOfIteratorHelper(stickyLineNumbers),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var stickyLineNumber = _step.value;\n          var _iterator2 = _createForOfIteratorHelper(event.ranges),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var range = _step2.value;\n              if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                return true;\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return false;\n    }\n  }, {\n    key: \"_onTokensChange\",\n    value: function _onTokensChange(event) {\n      if (this._needsUpdate(event)) {\n        this._renderStickyScroll();\n      }\n    }\n  }, {\n    key: \"_onDidResize\",\n    value: function _onDidResize() {\n      var layoutInfo = this._editor.getLayoutInfo();\n      var width = layoutInfo.width - layoutInfo.minimap.minimapCanvasOuterWidth - layoutInfo.verticalScrollbarWidth;\n      this._stickyScrollWidget.getDomNode().style.width = \"\".concat(width, \"px\");\n      // make sure sticky scroll doesn't take up more than 25% of the editor\n      var theoreticalLines = layoutInfo.height / this._editor.getOption(63 /* EditorOption.lineHeight */);\n      this._maxStickyLines = Math.round(theoreticalLines * .25);\n    }\n  }, {\n    key: \"_renderStickyScroll\",\n    value: function _renderStickyScroll() {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      var model = this._editor.getModel();\n      var stickyLineVersion = this._stickyLineCandidateProvider.getVersionId();\n      if (stickyLineVersion === undefined || stickyLineVersion === model.getVersionId()) {\n        this._widgetState = this.getScrollWidgetState();\n        this._stickyScrollWidget.setState(this._widgetState);\n      }\n    }\n  }, {\n    key: \"getScrollWidgetState\",\n    value: function getScrollWidgetState() {\n      var lineHeight = this._editor.getOption(63 /* EditorOption.lineHeight */);\n      var maxNumberStickyLines = Math.min(this._maxStickyLines, this._editor.getOption(109 /* EditorOption.stickyScroll */).maxLineCount);\n      var scrollTop = this._editor.getScrollTop();\n      var lastLineRelativePosition = 0;\n      var lineNumbers = [];\n      var arrayVisibleRanges = this._editor.getVisibleRanges();\n      if (arrayVisibleRanges.length !== 0) {\n        var fullVisibleRange = new StickyRange(arrayVisibleRanges[0].startLineNumber, arrayVisibleRanges[arrayVisibleRanges.length - 1].endLineNumber);\n        var candidateRanges = this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(fullVisibleRange);\n        var _iterator3 = _createForOfIteratorHelper(candidateRanges),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var range = _step3.value;\n            var start = range.startLineNumber;\n            var end = range.endLineNumber;\n            var depth = range.nestingDepth;\n            if (end - start > 0) {\n              var topOfElementAtDepth = (depth - 1) * lineHeight;\n              var bottomOfElementAtDepth = depth * lineHeight;\n              var bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n              var topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n              var bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n              if (topOfElementAtDepth > topOfEndLine && topOfElementAtDepth <= bottomOfEndLine) {\n                lineNumbers.push(start);\n                lastLineRelativePosition = bottomOfEndLine - bottomOfElementAtDepth;\n                break;\n              } else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth <= bottomOfEndLine) {\n                lineNumbers.push(start);\n              }\n              if (lineNumbers.length === maxNumberStickyLines) {\n                break;\n              }\n            }\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n      return new StickyScrollWidgetState(lineNumbers, lastLineRelativePosition);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      _get(_getPrototypeOf(StickyScrollController.prototype), \"dispose\", this).call(this);\n      this._sessionStore.dispose();\n    }\n  }]);\n  return StickyScrollController;\n}(Disposable);\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([__param(1, IContextMenuService), __param(2, ILanguageFeaturesService), __param(3, IInstantiationService)], StickyScrollController);\nexport { StickyScrollController };","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Disposable","DisposableStore","ILanguageFeaturesService","StickyScrollWidget","StickyScrollWidgetState","StickyLineCandidateProvider","StickyRange","IInstantiationService","dom","IContextMenuService","MenuId","StickyScrollController","_Disposable","_inherits","_super","_createSuper","_editor","_contextMenuService","languageFeaturesService","instaService","_this","_classCallCheck","call","_sessionStore","_maxStickyLines","Number","MAX_SAFE_INTEGER","_stickyScrollWidget","_stickyLineCandidateProvider","_widgetState","_register","onDidChangeConfiguration","hasChanged","_readConfiguration","addDisposableListener","getDomNode","EventType","CONTEXT_MENU","event","_assertThisInitialized","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","_onContextMenu","stop","_createClass","showContextMenu","menuId","StickyScrollContext","getAnchor","_this2","options","getOption","enabled","removeOverlayWidget","clear","addOverlayWidget","add","onDidScrollChange","_renderStickyScroll","onDidLayoutChange","_onDidResize","onDidChangeModelTokens","_onTokensChange","onDidChangeStickyScroll","lineNumberOption","renderType","onDidChangeCursorPosition","_needsUpdate","stickyLineNumbers","getCurrentLines","_iterator","_createForOfIteratorHelper","_step","s","n","stickyLineNumber","_iterator2","ranges","_step2","range","fromLineNumber","toLineNumber","err","f","layoutInfo","getLayoutInfo","width","minimap","minimapCanvasOuterWidth","verticalScrollbarWidth","style","concat","theoreticalLines","height","Math","round","hasModel","model","getModel","stickyLineVersion","getVersionId","undefined","getScrollWidgetState","setState","lineHeight","maxNumberStickyLines","min","maxLineCount","scrollTop","getScrollTop","lastLineRelativePosition","lineNumbers","arrayVisibleRanges","getVisibleRanges","fullVisibleRange","startLineNumber","endLineNumber","candidateRanges","getCandidateStickyLinesIntersecting","_iterator3","_step3","start","end","depth","nestingDepth","topOfElementAtDepth","bottomOfElementAtDepth","bottomOfBeginningLine","getBottomForLineNumber","topOfEndLine","getTopForLineNumber","bottomOfEndLine","push","dispose","_get","_getPrototypeOf","prototype","ID"],"sources":["/Users/cadany/WebstormProjects/monaco/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollController.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { StickyScrollWidget, StickyScrollWidgetState } from './stickyScrollWidget.js';\nimport { StickyLineCandidateProvider, StickyRange } from './stickyScrollProvider.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nlet StickyScrollController = class StickyScrollController extends Disposable {\n    constructor(_editor, _contextMenuService, languageFeaturesService, instaService) {\n        super();\n        this._editor = _editor;\n        this._contextMenuService = _contextMenuService;\n        this._sessionStore = new DisposableStore();\n        this._maxStickyLines = Number.MAX_SAFE_INTEGER;\n        this._stickyScrollWidget = new StickyScrollWidget(this._editor, languageFeaturesService, instaService);\n        this._stickyLineCandidateProvider = new StickyLineCandidateProvider(this._editor, languageFeaturesService);\n        this._widgetState = new StickyScrollWidgetState([], 0);\n        this._register(this._stickyScrollWidget);\n        this._register(this._stickyLineCandidateProvider);\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(109 /* EditorOption.stickyScroll */)) {\n                this._readConfiguration();\n            }\n        }));\n        this._readConfiguration();\n        this._register(dom.addDisposableListener(this._stickyScrollWidget.getDomNode(), dom.EventType.CONTEXT_MENU, (event) => __awaiter(this, void 0, void 0, function* () {\n            this._onContextMenu(event);\n        })));\n    }\n    _onContextMenu(event) {\n        this._contextMenuService.showContextMenu({\n            menuId: MenuId.StickyScrollContext,\n            getAnchor: () => event,\n        });\n    }\n    _readConfiguration() {\n        const options = this._editor.getOption(109 /* EditorOption.stickyScroll */);\n        if (options.enabled === false) {\n            this._editor.removeOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.clear();\n            return;\n        }\n        else {\n            this._editor.addOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidScrollChange(() => this._renderStickyScroll()));\n            this._sessionStore.add(this._editor.onDidLayoutChange(() => this._onDidResize()));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(() => this._renderStickyScroll()));\n            const lineNumberOption = this._editor.getOption(64 /* EditorOption.lineNumbers */);\n            if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n                this._sessionStore.add(this._editor.onDidChangeCursorPosition(() => this._renderStickyScroll()));\n            }\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this._stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._renderStickyScroll();\n        }\n    }\n    _onDidResize() {\n        const layoutInfo = this._editor.getLayoutInfo();\n        const width = layoutInfo.width - layoutInfo.minimap.minimapCanvasOuterWidth - layoutInfo.verticalScrollbarWidth;\n        this._stickyScrollWidget.getDomNode().style.width = `${width}px`;\n        // make sure sticky scroll doesn't take up more than 25% of the editor\n        const theoreticalLines = layoutInfo.height / this._editor.getOption(63 /* EditorOption.lineHeight */);\n        this._maxStickyLines = Math.round(theoreticalLines * .25);\n    }\n    _renderStickyScroll() {\n        if (!(this._editor.hasModel())) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const stickyLineVersion = this._stickyLineCandidateProvider.getVersionId();\n        if (stickyLineVersion === undefined || stickyLineVersion === model.getVersionId()) {\n            this._widgetState = this.getScrollWidgetState();\n            this._stickyScrollWidget.setState(this._widgetState);\n        }\n    }\n    getScrollWidgetState() {\n        const lineHeight = this._editor.getOption(63 /* EditorOption.lineHeight */);\n        const maxNumberStickyLines = Math.min(this._maxStickyLines, this._editor.getOption(109 /* EditorOption.stickyScroll */).maxLineCount);\n        const scrollTop = this._editor.getScrollTop();\n        let lastLineRelativePosition = 0;\n        const lineNumbers = [];\n        const arrayVisibleRanges = this._editor.getVisibleRanges();\n        if (arrayVisibleRanges.length !== 0) {\n            const fullVisibleRange = new StickyRange(arrayVisibleRanges[0].startLineNumber, arrayVisibleRanges[arrayVisibleRanges.length - 1].endLineNumber);\n            const candidateRanges = this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(fullVisibleRange);\n            for (const range of candidateRanges) {\n                const start = range.startLineNumber;\n                const end = range.endLineNumber;\n                const depth = range.nestingDepth;\n                if (end - start > 0) {\n                    const topOfElementAtDepth = (depth - 1) * lineHeight;\n                    const bottomOfElementAtDepth = depth * lineHeight;\n                    const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                    const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                    const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                    if (topOfElementAtDepth > topOfEndLine && topOfElementAtDepth <= bottomOfEndLine) {\n                        lineNumbers.push(start);\n                        lastLineRelativePosition = bottomOfEndLine - bottomOfElementAtDepth;\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth <= bottomOfEndLine) {\n                        lineNumbers.push(start);\n                    }\n                    if (lineNumbers.length === maxNumberStickyLines) {\n                        break;\n                    }\n                }\n            }\n        }\n        return new StickyScrollWidgetState(lineNumbers, lastLineRelativePosition);\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IInstantiationService)\n], StickyScrollController);\nexport { StickyScrollController };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}