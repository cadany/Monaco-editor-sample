{"ast":null,"code":"import _get from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _classCallCheck from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/cadany/WebstormProjects/monaco/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorKeybindingCancellationTokenSource } from './keybindingCancellation.js';\nexport var EditorState = /*#__PURE__*/function () {\n  function EditorState(editor, flags) {\n    _classCallCheck(this, EditorState);\n    this.flags = flags;\n    if ((this.flags & 1 /* CodeEditorStateFlag.Value */) !== 0) {\n      var model = editor.getModel();\n      this.modelVersionId = model ? strings.format('{0}#{1}', model.uri.toString(), model.getVersionId()) : null;\n    } else {\n      this.modelVersionId = null;\n    }\n    if ((this.flags & 4 /* CodeEditorStateFlag.Position */) !== 0) {\n      this.position = editor.getPosition();\n    } else {\n      this.position = null;\n    }\n    if ((this.flags & 2 /* CodeEditorStateFlag.Selection */) !== 0) {\n      this.selection = editor.getSelection();\n    } else {\n      this.selection = null;\n    }\n    if ((this.flags & 8 /* CodeEditorStateFlag.Scroll */) !== 0) {\n      this.scrollLeft = editor.getScrollLeft();\n      this.scrollTop = editor.getScrollTop();\n    } else {\n      this.scrollLeft = -1;\n      this.scrollTop = -1;\n    }\n  }\n  _createClass(EditorState, [{\n    key: \"_equals\",\n    value: function _equals(other) {\n      if (!(other instanceof EditorState)) {\n        return false;\n      }\n      var state = other;\n      if (this.modelVersionId !== state.modelVersionId) {\n        return false;\n      }\n      if (this.scrollLeft !== state.scrollLeft || this.scrollTop !== state.scrollTop) {\n        return false;\n      }\n      if (!this.position && state.position || this.position && !state.position || this.position && state.position && !this.position.equals(state.position)) {\n        return false;\n      }\n      if (!this.selection && state.selection || this.selection && !state.selection || this.selection && state.selection && !this.selection.equalsRange(state.selection)) {\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate(editor) {\n      return this._equals(new EditorState(editor, this.flags));\n    }\n  }]);\n  return EditorState;\n}();\n/**\n * A cancellation token source that cancels when the editor changes as expressed\n * by the provided flags\n * @param range If provided, changes in position and selection within this range will not trigger cancellation\n */\nexport var EditorStateCancellationTokenSource = /*#__PURE__*/function (_EditorKeybindingCanc) {\n  _inherits(EditorStateCancellationTokenSource, _EditorKeybindingCanc);\n  var _super = _createSuper(EditorStateCancellationTokenSource);\n  function EditorStateCancellationTokenSource(editor, flags, range, parent) {\n    var _this;\n    _classCallCheck(this, EditorStateCancellationTokenSource);\n    _this = _super.call(this, editor, parent);\n    _this._listener = new DisposableStore();\n    if (flags & 4 /* CodeEditorStateFlag.Position */) {\n      _this._listener.add(editor.onDidChangeCursorPosition(function (e) {\n        if (!range || !Range.containsPosition(range, e.position)) {\n          _this.cancel();\n        }\n      }));\n    }\n    if (flags & 2 /* CodeEditorStateFlag.Selection */) {\n      _this._listener.add(editor.onDidChangeCursorSelection(function (e) {\n        if (!range || !Range.containsRange(range, e.selection)) {\n          _this.cancel();\n        }\n      }));\n    }\n    if (flags & 8 /* CodeEditorStateFlag.Scroll */) {\n      _this._listener.add(editor.onDidScrollChange(function (_) {\n        return _this.cancel();\n      }));\n    }\n    if (flags & 1 /* CodeEditorStateFlag.Value */) {\n      _this._listener.add(editor.onDidChangeModel(function (_) {\n        return _this.cancel();\n      }));\n      _this._listener.add(editor.onDidChangeModelContent(function (_) {\n        return _this.cancel();\n      }));\n    }\n    return _this;\n  }\n  _createClass(EditorStateCancellationTokenSource, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this._listener.dispose();\n      _get(_getPrototypeOf(EditorStateCancellationTokenSource.prototype), \"dispose\", this).call(this);\n    }\n  }]);\n  return EditorStateCancellationTokenSource;\n}(EditorKeybindingCancellationTokenSource);\n/**\n * A cancellation token source that cancels when the provided model changes\n */\nexport var TextModelCancellationTokenSource = /*#__PURE__*/function (_CancellationTokenSou) {\n  _inherits(TextModelCancellationTokenSource, _CancellationTokenSou);\n  var _super2 = _createSuper(TextModelCancellationTokenSource);\n  function TextModelCancellationTokenSource(model, parent) {\n    var _this2;\n    _classCallCheck(this, TextModelCancellationTokenSource);\n    _this2 = _super2.call(this, parent);\n    _this2._listener = model.onDidChangeContent(function () {\n      return _this2.cancel();\n    });\n    return _this2;\n  }\n  _createClass(TextModelCancellationTokenSource, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this._listener.dispose();\n      _get(_getPrototypeOf(TextModelCancellationTokenSource.prototype), \"dispose\", this).call(this);\n    }\n  }]);\n  return TextModelCancellationTokenSource;\n}(CancellationTokenSource);","map":{"version":3,"names":["strings","Range","CancellationTokenSource","DisposableStore","EditorKeybindingCancellationTokenSource","EditorState","editor","flags","_classCallCheck","model","getModel","modelVersionId","format","uri","toString","getVersionId","position","getPosition","selection","getSelection","scrollLeft","getScrollLeft","scrollTop","getScrollTop","_createClass","key","value","_equals","other","state","equals","equalsRange","validate","EditorStateCancellationTokenSource","_EditorKeybindingCanc","_inherits","_super","_createSuper","range","parent","_this","call","_listener","add","onDidChangeCursorPosition","e","containsPosition","cancel","onDidChangeCursorSelection","containsRange","onDidScrollChange","_","onDidChangeModel","onDidChangeModelContent","dispose","_get","_getPrototypeOf","prototype","TextModelCancellationTokenSource","_CancellationTokenSou","_super2","_this2","onDidChangeContent"],"sources":["/Users/cadany/WebstormProjects/monaco/node_modules/monaco-editor/esm/vs/editor/contrib/editorState/browser/editorState.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorKeybindingCancellationTokenSource } from './keybindingCancellation.js';\nexport class EditorState {\n    constructor(editor, flags) {\n        this.flags = flags;\n        if ((this.flags & 1 /* CodeEditorStateFlag.Value */) !== 0) {\n            const model = editor.getModel();\n            this.modelVersionId = model ? strings.format('{0}#{1}', model.uri.toString(), model.getVersionId()) : null;\n        }\n        else {\n            this.modelVersionId = null;\n        }\n        if ((this.flags & 4 /* CodeEditorStateFlag.Position */) !== 0) {\n            this.position = editor.getPosition();\n        }\n        else {\n            this.position = null;\n        }\n        if ((this.flags & 2 /* CodeEditorStateFlag.Selection */) !== 0) {\n            this.selection = editor.getSelection();\n        }\n        else {\n            this.selection = null;\n        }\n        if ((this.flags & 8 /* CodeEditorStateFlag.Scroll */) !== 0) {\n            this.scrollLeft = editor.getScrollLeft();\n            this.scrollTop = editor.getScrollTop();\n        }\n        else {\n            this.scrollLeft = -1;\n            this.scrollTop = -1;\n        }\n    }\n    _equals(other) {\n        if (!(other instanceof EditorState)) {\n            return false;\n        }\n        const state = other;\n        if (this.modelVersionId !== state.modelVersionId) {\n            return false;\n        }\n        if (this.scrollLeft !== state.scrollLeft || this.scrollTop !== state.scrollTop) {\n            return false;\n        }\n        if (!this.position && state.position || this.position && !state.position || this.position && state.position && !this.position.equals(state.position)) {\n            return false;\n        }\n        if (!this.selection && state.selection || this.selection && !state.selection || this.selection && state.selection && !this.selection.equalsRange(state.selection)) {\n            return false;\n        }\n        return true;\n    }\n    validate(editor) {\n        return this._equals(new EditorState(editor, this.flags));\n    }\n}\n/**\n * A cancellation token source that cancels when the editor changes as expressed\n * by the provided flags\n * @param range If provided, changes in position and selection within this range will not trigger cancellation\n */\nexport class EditorStateCancellationTokenSource extends EditorKeybindingCancellationTokenSource {\n    constructor(editor, flags, range, parent) {\n        super(editor, parent);\n        this._listener = new DisposableStore();\n        if (flags & 4 /* CodeEditorStateFlag.Position */) {\n            this._listener.add(editor.onDidChangeCursorPosition(e => {\n                if (!range || !Range.containsPosition(range, e.position)) {\n                    this.cancel();\n                }\n            }));\n        }\n        if (flags & 2 /* CodeEditorStateFlag.Selection */) {\n            this._listener.add(editor.onDidChangeCursorSelection(e => {\n                if (!range || !Range.containsRange(range, e.selection)) {\n                    this.cancel();\n                }\n            }));\n        }\n        if (flags & 8 /* CodeEditorStateFlag.Scroll */) {\n            this._listener.add(editor.onDidScrollChange(_ => this.cancel()));\n        }\n        if (flags & 1 /* CodeEditorStateFlag.Value */) {\n            this._listener.add(editor.onDidChangeModel(_ => this.cancel()));\n            this._listener.add(editor.onDidChangeModelContent(_ => this.cancel()));\n        }\n    }\n    dispose() {\n        this._listener.dispose();\n        super.dispose();\n    }\n}\n/**\n * A cancellation token source that cancels when the provided model changes\n */\nexport class TextModelCancellationTokenSource extends CancellationTokenSource {\n    constructor(model, parent) {\n        super(parent);\n        this._listener = model.onDidChangeContent(() => this.cancel());\n    }\n    dispose() {\n        this._listener.dispose();\n        super.dispose();\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}